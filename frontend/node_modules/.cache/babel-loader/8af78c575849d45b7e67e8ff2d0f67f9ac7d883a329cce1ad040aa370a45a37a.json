{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\chat-app\\\\frontend\\\\src\\\\components\\\\ChatWindow\\\\ChatWindow.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../../context/AuthContext';\nimport { ChatContext } from '../../context/ChatContext';\nimport MessageList from './MessageList';\nimport MessageInput from './MessageInput';\nimport './ChatWindow.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatWindow = ({\n  chatUser\n}) => {\n  _s();\n  // ðŸ”¥ RECEIVE chatUser prop\n  const {\n    user: currentUser\n  } = useContext(AuthContext);\n  const {\n    socket,\n    messages,\n    setMessages\n  } = useContext(ChatContext);\n  const [newMessages, setNewMessages] = useState([]);\n  useEffect(() => {\n    if (!chatUser || !socket || !currentUser) return;\n\n    // Clear messages when switching chats\n\n    // Listen for messages from selected user\n    socket.on('receiveMessage', data => {\n      if (data.to === currentUser._id || data.from === currentUser._id) {\n        setNewMessages(prev => [...prev, data]);\n      }\n    });\n    return () => {\n      socket.off('receiveMessage');\n    };\n  }, [chatUser, socket, currentUser, setMessages]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-window\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Chat with \", (chatUser === null || chatUser === void 0 ? void 0 : chatUser.username) || 'Loading...']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: chatUser !== null && chatUser !== void 0 && chatUser.isOnline ? 'online' : 'offline',\n        children: chatUser !== null && chatUser !== void 0 && chatUser.isOnline ? 'ðŸŸ¢ Online' : 'ðŸ”´ Offline'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MessageList, {\n      messages: newMessages,\n      currentUserId: currentUser._id,\n      currentUsername: currentUser.username\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MessageInput, {\n      chatUser: chatUser,\n      currentUser: currentUser,\n      messages: newMessages\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatWindow, \"utOXPjWz3zuTCIi58+N63c103Wg=\");\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","ChatContext","MessageList","MessageInput","jsxDEV","_jsxDEV","ChatWindow","chatUser","_s","user","currentUser","socket","messages","setMessages","newMessages","setNewMessages","on","data","to","_id","from","prev","off","className","children","username","fileName","_jsxFileName","lineNumber","columnNumber","isOnline","currentUserId","currentUsername","_c","$RefreshReg$"],"sources":["C:/Users/admin/chat-app/frontend/src/components/ChatWindow/ChatWindow.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { ChatContext } from '../../context/ChatContext';\r\nimport MessageList from './MessageList';\r\nimport MessageInput from './MessageInput';\r\nimport './ChatWindow.css';\r\n\r\nconst ChatWindow = ({ chatUser }) => {  // ðŸ”¥ RECEIVE chatUser prop\r\n  const { user: currentUser } = useContext(AuthContext);\r\n  const { socket, messages, setMessages } = useContext(ChatContext);\r\n  const [newMessages, setNewMessages] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!chatUser || !socket || !currentUser) return;\r\n\r\n    // Clear messages when switching chats\r\n    \r\n\r\n    // Listen for messages from selected user\r\n    socket.on('receiveMessage', (data) => {\r\n      if (data.to === currentUser._id || data.from === currentUser._id) {\r\n        setNewMessages(prev => [...prev, data]);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.off('receiveMessage');\r\n    };\r\n  }, [chatUser, socket, currentUser, setMessages]);\r\n\r\n  return (\r\n    <div className=\"chat-window\">\r\n      <div className=\"chat-header\">\r\n        {/* ðŸ”¥ SHOW SELECTED USER NAME */}\r\n        <h2>Chat with {chatUser?.username || 'Loading...'}</h2>\r\n        <span className={chatUser?.isOnline ? 'online' : 'offline'}>\r\n          {chatUser?.isOnline ? 'ðŸŸ¢ Online' : 'ðŸ”´ Offline'}\r\n        </span>\r\n      </div>\r\n      <MessageList messages={newMessages} currentUserId={currentUser._id} currentUsername={currentUser.username} />\r\n      <MessageInput chatUser={chatUser} currentUser={currentUser} messages={newMessages} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatWindow;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}